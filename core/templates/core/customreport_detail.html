{% extends 'core/base.html' %}
{% load i18n %}

{% block title %}{{ object.name }}{% endblock %}

{% block content %}
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold text-slate-800">{{ object.name }}</h1>
        <div class="flex space-x-3">
            <a href="{% url 'customreport-update' object.pk %}" class="px-4 py-2 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition-colors">{% trans "Sửa" %}</a>
            <a href="{% url 'customreport-delete' object.pk %}" class="px-4 py-2 rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-colors">{% trans "Xóa" %}</a>
            <a href="{% url 'customreport-list' %}" class="px-4 py-2 rounded-md text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 transition-colors">{% trans "Quay lại" %}</a>
        </div>
    </div>

    <div class="bg-white p-8 rounded-xl shadow-md mb-8">
        <h2 class="text-xl font-semibold text-slate-700 mb-4">{% trans "Thông tin Báo cáo" %}</h2>
        <p class="text-slate-600 mb-2"><strong class="font-semibold">{% trans "Mô tả" %}:</strong> {{ object.description|default:"N/A" }}</p>
        <p class="text-slate-600 mb-2"><strong class="font-semibold">{% trans "Model nguồn" %}:</strong> {{ object.model_name }}</p>
        <p class="text-slate-600 mb-2"><strong class="font-semibold">{% trans "Các trường hiển thị" %}:</strong> {{ object.fields_to_display }}</p>
        <p class="text-slate-600 mb-2"><strong class="font-semibold">{% trans "Bộ lọc" %}:</strong> {{ object.filters|default:"Không có" }}</p>
        <p class="text-slate-600 mb-2"><strong class="font-semibold">{% trans "Người tạo" %}:</strong> {{ object.created_by.username }}</p>
        <p class="text-slate-600 mb-2"><strong class="font-semibold">{% trans "Thời gian tạo" %}:</strong> {{ object.created_at|date:"d/m/Y H:i" }}</p>
    </div>

    <div class="bg-white shadow-md rounded-lg overflow-hidden">
        <h2 class="text-xl font-bold text-slate-800 p-6 border-b border-slate-200">{% trans "Kết quả Báo cáo" %}</h2>
        {% if report_data %}
            <table class="min-w-full divide-y divide-slate-200">
                <thead class="bg-slate-50">
                    <tr>
                        {% for field_name in object.fields_to_display %}
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">{{ field_name|title }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-slate-200">
                    {% for row in report_data %}
                        <tr class="hover:bg-slate-50 transition-colors">
                            {% for field_name in object.fields_to_display %}
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-900">{{ row|get_item:field_name }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="text-slate-500 text-center py-4">{% trans "Không có dữ liệu cho báo cáo này." %}</p>
        {% endif %}
    </div>
{% endblock %}